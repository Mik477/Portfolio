import{w as f,r as T}from"./DQxZm1d5.js";import{g as m}from"./NPhWgOBK.js";const u="portfolio-nav-history",b=["/impressum","/datenschutz","/barrierefreiheit","/imprint","/privacy","/accessibility"];function g(r){const e=r.endsWith("/")&&r.length>1?r.slice(0,-1):r;for(const t of b)if(e===t||e===`/en${t}`||e===`/de${t}`)return!0;return!1}function S(){const r=()=>{try{const n=sessionStorage.getItem(u);if(n){const i=JSON.parse(n);if(typeof i.lastContentPage=="string"||i.lastContentPage===null)return i}}catch{}return{lastContentPage:null}},{subscribe:e,set:t,update:l}=f(r());return e(n=>{try{sessionStorage.setItem(u,JSON.stringify(n))}catch{}}),{subscribe:e,recordPageVisit(n,i=""){if(g(n))return;const d=i?`${n}${i}`:n;l(P=>({...P,lastContentPage:d}))},getBackUrl(n="de"){const i=T({subscribe:e});return i.lastContentPage?i.lastContentPage:`/${n}`},clear(){t({lastContentPage:null})}}}const h=S(),{subscribe:v,update:c}=f({visible:!1,color:"#000000"}),y=90;let s=null,a=null,o=0;const C={subscribe:v,fadeToBlackAndNavigate:r=>{{const t=window.location.pathname,l=window.location.hash;g(t)||h.recordPageVisit(t,l)}o++;const e=o;s!==null&&(clearTimeout(s),s=null),a!==null&&(clearTimeout(a),a=null),c(t=>({...t,visible:!0})),s=setTimeout(()=>{s=null,e===o&&m(r).then(()=>{e===o&&(a=setTimeout(()=>{a=null,e===o&&c(t=>({...t,visible:!1}))},50))}).catch(()=>{e===o&&c(t=>({...t,visible:!1}))})},y)}};export{g as i,h as n,C as t};
