<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Template Setup - Anki Automation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Now Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.7;
            color: #E8EAED;
            background: #0A0E14;
            padding: 40px 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: #111720;
            border-radius: 16px;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
            overflow: hidden;
            border: 1px solid #1A2332;
        }

        .header {
            background: linear-gradient(180deg, #0D1117 0%, #111720 100%);
            color: #E8EAED;
            padding: 48px 40px;
            text-align: center;
            border-bottom: 1px solid #1A2332;
        }

        .header h1 {
            font-size: 2.2em;
            font-weight: 600;
            margin-bottom: 8px;
            color: #E8EAED;
            letter-spacing: -0.5px;
        }

        .header h1 span {
            color: #00E5FF;
        }

        .header p {
            font-size: 1.05em;
            color: #6B7280;
            font-weight: 400;
        }

        .content {
            padding: 48px;
        }

        .section {
            margin-bottom: 48px;
        }

        .section:last-child {
            margin-bottom: 0;
        }

        .section h2 {
            color: #E8EAED;
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid #1A2332;
            letter-spacing: -0.3px;
        }

        .section h3 {
            color: #9BA1A6;
            font-size: 1.1em;
            font-weight: 500;
            margin: 28px 0 16px;
        }

        .section > p {
            margin-bottom: 16px;
            color: #9BA1A6;
        }

        .steps {
            list-style: none;
            margin-top: 24px;
            counter-reset: step-counter;
        }

        .steps > li {
            counter-increment: step-counter;
            margin-bottom: 24px;
            padding-left: 36px;
            position: relative;
        }

        .steps > li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 2px;
            color: #00E5FF;
            font-weight: 600;
            font-size: 0.95em;
            width: 24px;
        }

        .steps > li > strong {
            display: block;
            margin-bottom: 8px;
            color: #E8EAED;
            font-weight: 600;
        }

        .steps > li > p {
            color: #9BA1A6;
            margin-bottom: 12px;
        }

        .code-block {
            background: #0A0E14;
            border-left: 3px solid #00E5FF;
            padding: 20px 24px;
            margin: 20px 0;
            border-radius: 6px;
            font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
            font-size: 0.8em;
            overflow-x: auto;
            color: #9BA1A6;
            white-space: pre-wrap;
            position: relative;
            max-height: 500px;
            overflow-y: auto;
        }

        .code-block code {
            background: none;
            padding: 0;
            color: inherit;
            font-size: inherit;
        }

        .copy-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #00E5FF;
            color: #0A0E14;
            border: none;
            padding: 6px 14px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.8em;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background: #00B8D4;
            transform: translateY(-1px);
        }

        .copy-btn.copied {
            background: #10b981;
        }

        .info-box {
            background: rgba(0, 229, 255, 0.06);
            border-left: 3px solid #00E5FF;
            padding: 16px 20px;
            margin: 20px 0;
            border-radius: 6px;
            color: #9BA1A6;
        }

        .warning-box {
            background: rgba(255, 193, 7, 0.06);
            border-left: 3px solid #FFC107;
            padding: 16px 20px;
            margin: 20px 0;
            border-radius: 6px;
            color: #9BA1A6;
        }

        .tip-box {
            background: rgba(0, 184, 212, 0.06);
            border-left: 3px solid #00B8D4;
            padding: 16px 20px;
            margin: 16px 0;
            border-radius: 6px;
            color: #9BA1A6;
        }

        .button {
            display: inline-block;
            background: #00E5FF;
            color: #0A0E14;
            padding: 12px 28px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95em;
            transition: all 0.2s ease;
            margin-right: 12px;
            margin-bottom: 12px;
        }

        .button:hover {
            background: #00B8D4;
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(0, 229, 255, 0.3);
            text-decoration: none;
            color: #0A0E14;
        }

        .button.secondary {
            background: transparent;
            color: #00E5FF;
            border: 1px solid #00E5FF;
        }

        .button.secondary:hover {
            background: rgba(0, 229, 255, 0.1);
            color: #00E5FF;
        }

        .footer {
            background: #0A0E14;
            padding: 32px 40px;
            text-align: center;
            color: #6B7280;
            border-top: 1px solid #1A2332;
            font-size: 0.9em;
        }

        .footer strong {
            color: #9BA1A6;
        }

        a {
            color: #00E5FF;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        a:hover {
            color: #00B8D4;
        }

        strong {
            color: #00E5FF;
            font-weight: 600;
        }

        code {
            background: #0A0E14;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'SF Mono', 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #00E5FF;
        }

        table.preview {
            width: 100%;
            border-collapse: collapse;
            margin: 24px 0;
            background: #0D1117;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #1A2332;
        }

        table.preview th {
            background: #1A2332;
            color: #E8EAED;
            padding: 14px 18px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9em;
        }

        table.preview td {
            padding: 14px 18px;
            border-bottom: 1px solid #1A2332;
            color: #9BA1A6;
            font-size: 0.95em;
        }

        table.preview tr:last-child td {
            border-bottom: none;
        }

        .tab-container {
            margin: 24px 0;
        }

        .tab-buttons {
            display: flex;
            gap: 4px;
            margin-bottom: 0;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: #1A2332;
            color: #6B7280;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            font-weight: 500;
            font-size: 0.9em;
            transition: all 0.2s ease;
        }

        .tab-btn.active {
            background: #0A0E14;
            color: #00E5FF;
        }

        .tab-btn:hover {
            color: #E8EAED;
        }

        .tab-content {
            display: none;
            background: #0A0E14;
            padding: 0;
            border-radius: 0 8px 8px 8px;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content .code-block {
            margin: 0;
            border-radius: 0 8px 8px 8px;
        }

        ul, ol {
            color: #9BA1A6;
        }

        li {
            margin-bottom: 8px;
        }

        p {
            color: #9BA1A6;
        }

        .feature-list {
            list-style: disc;
            margin-left: 24px;
            margin-top: 16px;
        }

        .feature-list li {
            margin-bottom: 10px;
            color: #6B7280;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .feature-card {
            background: #0A0E14;
            border: 1px solid #1A2332;
            border-radius: 8px;
            padding: 20px;
        }

        .feature-card h4 {
            color: #00E5FF;
            font-size: 1em;
            margin-bottom: 8px;
        }

        .feature-card p {
            color: #6B7280;
            font-size: 0.9em;
            margin: 0;
        }

        .demo-section {
            background: #0A0E14;
            border: 1px solid #1A2332;
            border-radius: 8px;
            padding: 24px;
            margin: 24px 0;
        }

        .demo-section h4 {
            color: #E8EAED;
            margin-bottom: 16px;
            font-size: 1em;
        }

        /* Demo styling for preview elements */
        .demo-callout {
            padding: 12px 16px;
            border-radius: 6px;
            margin: 12px 0;
            font-size: 0.9em;
        }

        .demo-callout.info {
            background: rgba(0, 229, 255, 0.1);
            border-left: 4px solid #00E5FF;
            color: #9BA1A6;
        }

        .demo-callout.warning {
            background: rgba(251, 191, 36, 0.1);
            border-left: 4px solid #FBBF24;
            color: #9BA1A6;
        }

        .demo-callout.tip {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10B981;
            color: #9BA1A6;
        }

        .demo-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
            margin: 4px;
        }

        .demo-badge.cyan { background: rgba(0, 229, 255, 0.2); color: #00E5FF; }
        .demo-badge.green { background: rgba(16, 185, 129, 0.2); color: #10B981; }
        .demo-badge.amber { background: rgba(251, 191, 36, 0.2); color: #FBBF24; }
        .demo-badge.red { background: rgba(239, 68, 68, 0.2); color: #EF4444; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span>Card Template</span> Setup</h1>
            <p>Professional styling for AI-generated Anki cards</p>
        </div>

        <div class="content">
            <!-- WHY THIS IS NEEDED -->
            <div class="section">
                <h2>Why Configure Card Templates?</h2>
                <p>Anki Automation generates cards with professional formatting that typical users wouldn't create manually. This styling enables:</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>Tables</h4>
                        <p>Beautifully formatted data tables with headers, zebra stripes, and theme support</p>
                    </div>
                    <div class="feature-card">
                        <h4>Math &amp; LaTeX</h4>
                        <p>Rendered equations like E = mc² using MathJax</p>
                    </div>
                    <div class="feature-card">
                        <h4>Code Blocks</h4>
                        <p>Syntax-styled code with monospace fonts and dark backgrounds</p>
                    </div>
                    <div class="feature-card">
                        <h4>Callout Boxes</h4>
                        <p>Info, Warning, and Tip boxes to highlight key information</p>
                    </div>
                    <div class="feature-card">
                        <h4>Spoilers</h4>
                        <p>Hidden hints that reveal on hover (desktop) or tap (mobile)</p>
                    </div>
                    <div class="feature-card">
                        <h4>Badges &amp; Tags</h4>
                        <p>Colored labels for categorization and emphasis</p>
                    </div>
                    <div class="feature-card">
                        <h4>Keyboard Keys</h4>
                        <p>Styled &lt;kbd&gt; elements for shortcuts like Ctrl+C</p>
                    </div>
                    <div class="feature-card">
                        <h4>Light/Dark Mode</h4>
                        <p>Automatic theme detection for comfortable viewing</p>
                    </div>
                    <div class="feature-card">
                        <h4>Automatic Reverse Cards</h4>
                        <p>AI decides when a card benefits from a reversed version - created automatically</p>
                    </div>
                </div>

                <div class="warning-box" style="margin-top: 16px;">
                    <strong>Without this styling</strong>, your AI-generated cards will display as plain text without any of these professional features.
                </div>
            </div>

            <!-- QUICK SETUP -->
            <div class="section">
                <h2>Quick Setup Guide</h2>
                
                <ol class="steps">
                    <li>
                        <strong>Open Anki Desktop</strong>
                        <p>Make sure Anki is running on your computer.</p>
                    </li>
                    
                    <li>
                        <strong>Go to Note Type Manager</strong>
                        <p>Click <strong>Tools → Manage Note Types</strong> (or press <code>Ctrl+Shift+N</code> / <code>Cmd+Shift+N</code>)</p>
                    </li>
                    
                    <li>
                        <strong>Create a New Note Type</strong>
                        <p>We recommend creating a dedicated note type called <strong>"Anki Automation"</strong> for cards from Anki Automation.</p>
                        <div class="tip-box">
                            <strong>How to:</strong> Click "Add" → Select "Clone: Basic" → Name it "Anki Automation"
                        </div>
                    </li>

                    <li>
                        <strong>Verify Field Names (Important for Non-English Users)</strong>
                        <p>The templates below use the standard field names <code>Front</code> and <code>Back</code>. If your Anki is in another language (e.g., German), your fields might be named <code>Vorderseite</code> and <code>Rückseite</code>.</p>
                        <div class="warning-box">
                            <strong>Action Required:</strong> Select your new note type, click <strong>"Fields..."</strong>, and rename your fields to exactly <strong>Front</strong> and <strong>Back</strong>. This ensures compatibility with the templates and the automation tool.
                        </div>
                    </li>
                    
                    <li>
                        <strong>Open the Card Editor</strong>
                        <p>Select your new note type and click the <strong>"Cards..."</strong> button.</p>
                    </li>
                    
                    <li>
                        <strong>Paste the Templates</strong>
                        <p>Copy and paste each section below into the corresponding tab in Anki:</p>
                        <ul style="margin-top: 8px; margin-left: 20px;">
                            <li><strong>Front Template</strong> → paste into "Front Template"</li>
                            <li><strong>Back Template</strong> → paste into "Back Template"</li>
                            <li><strong>Styling (CSS)</strong> → paste into "Styling"</li>
                        </ul>
                    </li>
                    
                    <li>
                        <strong>Close and Save</strong>
                        <p>Click "Close" to save your changes. Your cards will now display with professional styling!</p>
                    </li>
                </ol>
            </div>

            <!-- TEMPLATES -->
            <div class="section">
                <h2>Card Templates</h2>
                <p>Copy each section and paste into the corresponding area in Anki's card editor:</p>
                
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="showTab('front')">Front Template</button>
                        <button class="tab-btn" onclick="showTab('back')">Back Template</button>
                        <button class="tab-btn" onclick="showTab('styling')">Styling (CSS)</button>
                    </div>
                    
                    <!-- FRONT TEMPLATE -->
                    <div class="tab-content active" id="tab-front">
                        <div class="code-block" id="front-template">
                            <button class="copy-btn" onclick="copyToClipboard('front-template', this)">Copy</button>
<code>{{Front}}

&lt;!-- MathJax for LaTeX rendering --&gt;
&lt;script&gt;
(function() {
    // 1. Convert $...$ to \(...\) for Anki's default MathJax (safe for text nodes)
    function convertMath() {
        if (!document.body) return;
        function walk(node) {
            var child, next;
            switch (node.nodeType) {
                case 1:  // Element
                case 9:  // Document
                case 11: // Document fragment
                    if (['SCRIPT', 'STYLE', 'TEXTAREA', 'PRE', 'CODE'].indexOf(node.tagName) === -1) {
                        child = node.firstChild;
                        while (child) {
                            next = child.nextSibling;
                            walk(child);
                            child = next;
                        }
                    }
                    break;
                case 3: // Text node
                     // Use regex to replace $...$ with \(...\)
                     // Using ES5 compatible regex (no lookbehind) to ensure compatibility with all Anki versions
                     if (node.nodeValue.indexOf('$') !== -1) {
                         node.nodeValue = node.nodeValue.replace(/\$([^\$]+)\$/g, '\\($1\\)');
                     }
                    break;
            }
        }
        walk(document.body);
    }
    
    // Config if loading fresh
    if (typeof MathJax === "undefined") {
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                processEscapes: true
            }
        };
        var script = document.createElement("script");
        script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        script.async = true;
        script.onload = function() { convertMath(); };
        document.head.appendChild(script);
    } else {
        // Already loaded? Run conversion then force typeset
        convertMath();
        setTimeout(function() {
            // MathJax 3
            if (window.MathJax.typesetPromise) window.MathJax.typesetPromise();
            // MathJax 2 (Legacy Anki)
            else if (window.MathJax.Hub) window.MathJax.Hub.Queue(["Typeset", window.MathJax.Hub]);
        }, 0);
    }
    
    // Also run convert immediately in case
    convertMath();
})();
&lt;/script&gt;</code></div>
                    </div>
                    
                    <!-- BACK TEMPLATE -->
                    <div class="tab-content" id="tab-back">
                        <div class="code-block" id="back-template">
                            <button class="copy-btn" onclick="copyToClipboard('back-template', this)">Copy</button>
<code>{{FrontSide}}

&lt;hr id="answer"&gt;

{{Back}}

&lt;!-- MathJax for LaTeX rendering --&gt;
&lt;script&gt;
(function() {
    // 1. Convert $...$ to \(...\) for Anki's default MathJax (safe for text nodes)
    function convertMath() {
        if (!document.body) return;
        function walk(node) {
            var child, next;
            switch (node.nodeType) {
                case 1:  // Element
                case 9:  // Document
                case 11: // Document fragment
                    if (['SCRIPT', 'STYLE', 'TEXTAREA', 'PRE', 'CODE'].indexOf(node.tagName) === -1) {
                        child = node.firstChild;
                        while (child) {
                            next = child.nextSibling;
                            walk(child);
                            child = next;
                        }
                    }
                    break;
                case 3: // Text node
                     // Use regex to replace $...$ with \(...\)
                     // Using ES5 compatible regex (no lookbehind) to ensure compatibility with all Anki versions
                     if (node.nodeValue.indexOf('$') !== -1) {
                         node.nodeValue = node.nodeValue.replace(/\$([^\$]+)\$/g, '\\($1\\)');
                     }
                    break;
            }
        }
        walk(document.body);
    }
    
    // Config if loading fresh
    if (typeof MathJax === "undefined") {
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                processEscapes: true
            }
        };
        var script = document.createElement("script");
        script.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        script.async = true;
        script.onload = function() { convertMath(); };
        document.head.appendChild(script);
    } else {
        // Already loaded? Run conversion then force typeset
        convertMath();
        setTimeout(function() {
            // MathJax 3
            if (window.MathJax.typesetPromise) window.MathJax.typesetPromise();
            // MathJax 2 (Legacy Anki)
            else if (window.MathJax.Hub) window.MathJax.Hub.Queue(["Typeset", window.MathJax.Hub]);
        }, 0);
    }
    
    // Also run convert immediately in case
    convertMath();
})();
&lt;/script&gt;</code></div>
                    </div>
                    
                    <!-- STYLING CSS -->
                    <div class="tab-content" id="tab-styling">
                        <div class="code-block" id="styling-code">
                            <button class="copy-btn" onclick="copyToClipboard('styling-code', this)">Copy CSS</button>
<code>/* ============================================================
   ANKI AUTOMATION - Professional Card Styling
   Version: 2.1.0
   
   Features: Tables, Code Blocks, Callouts, Spoilers, Badges,
             Keyboard Keys, Math/LaTeX, Light/Dark Mode
   
   Design Philosophy: Clean, professional styling with color
   used purposefully for emphasis, not decoration.
   ============================================================ */

/* === BASE CARD STYLING === */
.card {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    font-size: 18px;
    line-height: 1.7;
    color: #1F2937;
    background-color: #FFFFFF;
    padding: 24px;
    text-align: left;
    max-width: 100%;
    word-wrap: break-word;
}

/* === ANSWER DIVIDER === */
hr#answer {
    border: none;
    height: 1px;
    background-color: #D1D5DB;
    margin: 24px 0;
}

/* === TABLE STYLING === */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    background: #FFFFFF;
    border: 1px solid #E5E7EB;
    border-radius: 6px;
    overflow: hidden;
    font-size: 0.95em;
}

th {
    background-color: #F3F4F6;
    color: #374151;
    padding: 12px 16px;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid #E5E7EB;
}

/* Table alignment classes */
th.text-center, td.text-center,
th[align="center"], td[align="center"] {
    text-align: center;
}

th.text-right, td.text-right,
th[align="right"], td[align="right"] {
    text-align: right;
}

td {
    padding: 10px 16px;
    border-bottom: 1px solid #E5E7EB;
    vertical-align: top;
    background-color: #FFFFFF;
}

tr:last-child td {
    border-bottom: none;
}

tr:nth-child(even) td {
    background-color: #F9FAFB;
}

/* Compact table variant */
table.compact th,
table.compact td {
    padding: 8px 12px;
}

/* === CODE STYLING === */
code {
    font-family: 'SF Mono', 'Consolas', 'Monaco', 'Menlo', monospace;
    background-color: #F3F4F6;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9em;
    color: #1F2937;
}

pre {
    background-color: #1F2937;
    color: #E5E7EB;
    padding: 16px 20px;
    border-radius: 6px;
    overflow-x: auto;
    margin: 16px 0;
    font-family: 'SF Mono', 'Consolas', 'Monaco', 'Menlo', monospace;
    font-size: 0.85em;
    line-height: 1.6;
}

pre code {
    background: none;
    color: inherit;
    padding: 0;
    font-size: inherit;
}

/* === CALLOUT BOXES === */
.callout {
    padding: 16px 20px;
    border-radius: 6px;
    margin: 16px 0;
    border-left: 4px solid;
}

.callout-info, .info {
    background-color: rgba(59, 130, 246, 0.08);
    border-left-color: #3B82F6;
    color: #1F2937;
}

.callout-warning, .warning {
    background-color: rgba(251, 191, 36, 0.1);
    border-left-color: #F59E0B;
    color: #1F2937;
}

.callout-tip, .tip {
    background-color: rgba(16, 185, 129, 0.1);
    border-left-color: #10B981;
    color: #1F2937;
}

.callout-error, .error {
    background-color: rgba(239, 68, 68, 0.1);
    border-left-color: #EF4444;
    color: #1F2937;
}

.callout strong, .info strong, .warning strong, .tip strong, .error strong {
    display: block;
    margin-bottom: 4px;
    color: inherit;
}

/* === SPOILER / REVEAL (Hover + Click/Tap) === */
.spoiler {
    background-color: #E5E7EB;
    color: transparent;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
    user-select: none;
    border: 1px dashed #9CA3AF;
}

.spoiler:hover, .spoiler.revealed {
    background-color: #F3F4F6;
    color: #1F2937;
    border-color: #6B7280;
    border-style: solid;
}

/* Details/Summary spoiler (click-to-expand) */
details.spoiler-block {
    background-color: #F3F4F6;
    border: 1px solid #E5E7EB;
    border-radius: 6px;
    margin: 16px 0;
    overflow: hidden;
}

details.spoiler-block summary {
    padding: 12px 16px;
    cursor: pointer;
    font-weight: 500;
    color: #374151;
    background-color: #F9FAFB;
    border-bottom: 1px solid #E5E7EB;
    user-select: none;
    list-style: none;
}

details.spoiler-block summary::-webkit-details-marker {
    display: none;
}

details.spoiler-block summary::before {
    content: "▶ ";
    display: inline-block;
    transition: transform 0.2s ease;
}

details.spoiler-block[open] summary::before {
    transform: rotate(90deg);
}

details.spoiler-block > *:not(summary) {
    padding: 16px;
}

/* === BADGES / TAGS === */
.badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: 500;
    margin: 2px 4px 2px 0;
    vertical-align: middle;
}

.badge-cyan, .badge-primary {
    background-color: rgba(0, 229, 255, 0.15); /* PRIMARY ACCENT */
    color: #0891B2;
}

.badge-blue {
    background-color: rgba(59, 130, 246, 0.15);
    color: #2563EB;
}

.badge-green, .badge-success {
    background-color: rgba(16, 185, 129, 0.15);
    color: #059669;
}

.badge-amber, .badge-warning {
    background-color: rgba(251, 191, 36, 0.15);
    color: #D97706;
}

.badge-red, .badge-error {
    background-color: rgba(239, 68, 68, 0.15);
    color: #DC2626;
}

.badge-purple {
    background-color: rgba(139, 92, 246, 0.15);
    color: #7C3AED;
}

.badge-gray {
    background-color: rgba(107, 114, 128, 0.15);
    color: #4B5563;
}

/* === KEYBOARD KEYS === */
kbd {
    display: inline-block;
    padding: 4px 8px;
    font-family: 'SF Mono', 'Consolas', monospace;
    font-size: 0.85em;
    color: #374151;
    background: linear-gradient(180deg, #FFFFFF 0%, #F3F4F6 100%);
    border: 1px solid #D1D5DB;
    border-radius: 6px;
    box-shadow: 0 2px 0 #D1D5DB;
    margin: 0 2px;
    vertical-align: middle;
}

/* === BLOCKQUOTE === */
blockquote {
    border-left: 4px solid #D1D5DB;
    margin: 16px 0;
    padding: 12px 20px;
    background-color: #F9FAFB;
    border-radius: 0 6px 6px 0;
    color: #4B5563;
    font-style: italic;
}

blockquote cite {
    display: block;
    margin-top: 8px;
    font-size: 0.9em;
    color: #6B7280;
    font-style: normal;
}

/* === DEFINITION LIST === */
dl {
    margin: 16px 0;
}

dt {
    font-weight: 600;
    color: #1F2937;
    margin-top: 12px;
}

dd {
    margin-left: 20px;
    padding: 8px 0;
    color: #4B5563;
    border-left: 2px solid #E5E7EB;
    padding-left: 16px;
}

/* === LISTS === */
ul, ol {
    margin: 16px 0;
    padding-left: 24px;
}

li {
    margin-bottom: 8px;
    line-height: 1.6;
}

ul ul, ol ol, ul ol, ol ul {
    margin: 8px 0;
}

/* === HIGHLIGHT / MARK === */
mark, .highlight {
    background-color: rgba(251, 191, 36, 0.35);
    padding: 2px 6px;
    border-radius: 4px;
    color: inherit;
}

.highlight-yellow {
    background-color: rgba(251, 191, 36, 0.35);
}

.highlight-green {
    background-color: rgba(16, 185, 129, 0.3);
}

.highlight-red {
    background-color: rgba(239, 68, 68, 0.2);
}

.highlight-cyan {
    background-color: rgba(0, 229, 255, 0.25);
}

/* === COMPARISON TABLE (Checkmarks) === */
.yes, .check {
    color: #10B981;
    font-weight: bold;
}

.no, .cross {
    color: #EF4444;
    font-weight: bold;
}

/* === HEADINGS === */
h1, h2, h3, h4, h5, h6 {
    margin: 20px 0 12px 0;
    color: #111827;
    line-height: 1.4;
    font-weight: 600;
}

h1 { font-size: 1.6em; }
h2 { font-size: 1.4em; }
h3 { font-size: 1.2em; }
h4 { font-size: 1.1em; }

/* === LINKS === */
a {
    color: #2563EB;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
    color: #1D4ED8;
}

/* === IMAGES === */
img {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    margin: 12px 0;
}

/* === HORIZONTAL RULE === */
hr {
    border: none;
    height: 1px;
    background-color: #D1D5DB;
    margin: 24px 0;
}

/* === STRONG / EMPHASIS === */
strong, b {
    font-weight: 600;
    color: #111827;
}

em, i {
    font-style: italic;
}

/* === LATEX / MATHJAX === */
.MathJax, .mathjax, mjx-container {
    font-size: 1.1em !important;
    overflow-x: auto;
}

/* === CLOZE DELETIONS === */
.cloze {
    font-weight: 600;
    color: #2563EB;
    background-color: rgba(59, 130, 246, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
}


/* ============================================================
   NIGHT MODE / DARK THEME
   ============================================================ */
.nightMode .card {
    background-color: #111827;
    color: #E5E7EB;
}

.nightMode hr#answer {
    background-color: #374151;
}

/* Tables - Night */
.nightMode table {
    background: #1F2937;
    border-color: #374151;
}

.nightMode th {
    background-color: #374151;
    color: #F9FAFB;
    border-bottom-color: #4B5563;
}

.nightMode td {
    border-bottom-color: #374151;
    background-color: #1F2937;
}

.nightMode tr:nth-child(even) td {
    background-color: #263244;
}

/* Code - Night */
.nightMode code {
    background-color: #374151;
    color: #E5E7EB;
}

.nightMode pre {
    background-color: #0F172A;
}

/* Callouts - Night */
.nightMode .callout-info, .nightMode .info {
    background-color: rgba(96, 165, 250, 0.1);
    border-left-color: #60A5FA;
    color: #E5E7EB;
}

.nightMode .callout-warning, .nightMode .warning {
    background-color: rgba(251, 191, 36, 0.1);
    color: #E5E7EB;
}

.nightMode .callout-tip, .nightMode .tip {
    background-color: rgba(52, 211, 153, 0.1);
    color: #E5E7EB;
}

.nightMode .callout-error, .nightMode .error {
    background-color: rgba(248, 113, 113, 0.1);
    color: #E5E7EB;
}

/* Spoilers - Night */
.nightMode .spoiler {
    background-color: #374151;
    border-color: #4B5563;
}

.nightMode .spoiler:hover, .nightMode .spoiler.revealed {
    background-color: #4B5563;
    border-color: #6B7280;
    color: #E5E7EB;
}

.nightMode details.spoiler-block {
    background-color: #1F2937;
    border-color: #374151;
}

.nightMode details.spoiler-block summary {
    background-color: #263244;
    border-bottom-color: #374151;
    color: #E5E7EB;
}

/* Badges - Night */
.nightMode .badge-cyan, .nightMode .badge-primary {
    background-color: rgba(34, 211, 238, 0.2);
    color: #67E8F9;
}

.nightMode .badge-blue {
    background-color: rgba(96, 165, 250, 0.2);
    color: #93C5FD;
}

.nightMode .badge-green, .nightMode .badge-success {
    background-color: rgba(52, 211, 153, 0.2);
    color: #6EE7B7;
}

.nightMode .badge-amber, .nightMode .badge-warning {
    background-color: rgba(251, 191, 36, 0.2);
    color: #FCD34D;
}

.nightMode .badge-red, .nightMode .badge-error {
    background-color: rgba(248, 113, 113, 0.2);
    color: #FCA5A5;
}

.nightMode .badge-purple {
    background-color: rgba(167, 139, 250, 0.2);
    color: #C4B5FD;
}

.nightMode .badge-gray {
    background-color: rgba(156, 163, 175, 0.2);
    color: #D1D5DB;
}

/* Keyboard - Night */
.nightMode kbd {
    background: linear-gradient(180deg, #374151 0%, #1F2937 100%);
    color: #E5E7EB;
    border-color: #4B5563;
    box-shadow: 0 2px 0 #374151;
}

/* Blockquote - Night */
.nightMode blockquote {
    background-color: #1F2937;
    border-left-color: #4B5563;
    color: #9CA3AF;
}

.nightMode blockquote cite {
    color: #6B7280;
}

/* Definition List - Night */
.nightMode dt {
    color: #F3F4F6;
}

.nightMode dd {
    color: #9CA3AF;
    border-left-color: #374151;
}

/* Highlights - Night */
.nightMode mark, .nightMode .highlight {
    background-color: rgba(251, 191, 36, 0.3);
}

.nightMode .highlight-yellow {
    background-color: rgba(251, 191, 36, 0.3);
}

.nightMode .highlight-green {
    background-color: rgba(52, 211, 153, 0.25);
}

.nightMode .highlight-cyan {
    background-color: rgba(34, 211, 238, 0.25);
}

.nightMode .highlight-red {
    background-color: rgba(248, 113, 113, 0.2);
}

/* Headings - Night */
.nightMode h1, .nightMode h2, .nightMode h3,
.nightMode h4, .nightMode h5, .nightMode h6 {
    color: #F3F4F6;
}

/* Links - Night */
.nightMode a {
    color: #60A5FA;
}

.nightMode a:hover {
    color: #93C5FD;
}

/* Strong - Night */
.nightMode strong, .nightMode b {
    color: #F9FAFB;
}

/* Cloze - Night */
.nightMode .cloze {
    color: #60A5FA;
    background-color: rgba(96, 165, 250, 0.15);
}


/* ============================================================
   MOBILE OPTIMIZATIONS
   ============================================================ */
@media screen and (max-width: 600px) {
    .card {
        font-size: 16px;
        padding: 16px;
    }
    
    table {
        font-size: 0.9em;
    }
    
    th, td {
        padding: 10px 12px;
    }
    
    pre {
        font-size: 0.8em;
        padding: 12px 14px;
    }
    
    .badge {
        font-size: 0.75em;
    }
}


/* ============================================================
   SPOILER CLICK/TAP FUNCTIONALITY (JavaScript-free fallback)
   This uses :focus for tap support on mobile
   ============================================================ */
.spoiler:focus {
    background-color: rgba(0, 229, 255, 0.1);
    color: #1F2937;
    border-color: #00E5FF;
    border-style: solid;
    outline: none;
}

.nightMode .spoiler:focus {
    background-color: rgba(34, 211, 238, 0.15);
    color: #E5E7EB;
    border-color: #22D3EE;
}</code></div>
                    </div>
                </div>
            </div>

            <!-- PREVIEW -->
            <div class="section">
                <h2>What Your Cards Will Look Like</h2>
                <div class="info-box" style="margin-bottom: 32px;">
                    <strong>Automatic Reverse Cards:</strong> When the AI determines a card is suitable for bidirectional learning (e.g., vocabulary, definitions, translations), it marks it with <code>reverse: true</code>. The system automatically creates both the original card and a reversed version—no user action needed! Reversed cards have a <code>reversed</code> tag so you can filter them in Anki's browser if needed.
                </div>
                <p>After applying the styling, your AI-generated cards will display these professional features:</p>
                
                <div class="demo-section">
                    <h4>Callout Boxes</h4>
                    <div class="demo-callout info">
                        <strong>Info:</strong> This highlights important information that helps understanding.
                    </div>
                    <div class="demo-callout warning">
                        <strong>Warning:</strong> This draws attention to potential pitfalls or common mistakes.
                    </div>
                    <div class="demo-callout tip">
                        <strong>Tip:</strong> This provides helpful hints and best practices.
                    </div>
                </div>

                <div class="demo-section">
                    <h4>Badges / Tags</h4>
                    <p style="margin-bottom: 12px;">Perfect for categorizing concepts:</p>
                    <span class="demo-badge cyan">Primary</span>
                    <span class="demo-badge green">Easy</span>
                    <span class="demo-badge amber">Medium</span>
                    <span class="demo-badge red">Important</span>
                </div>

                <table class="preview">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>HTML Element</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Tables</td>
                            <td><code>&lt;table&gt;</code></td>
                            <td>Headers, zebra stripes, responsive</td>
                        </tr>
                        <tr>
                            <td>Code</td>
                            <td><code>&lt;code&gt;</code>, <code>&lt;pre&gt;</code></td>
                            <td>Inline and block code formatting</td>
                        </tr>
                        <tr>
                            <td>Callouts</td>
                            <td><code>&lt;div class="info"&gt;</code></td>
                            <td>Info, Warning, Tip, Error boxes</td>
                        </tr>
                        <tr>
                            <td>Spoilers</td>
                            <td><code>&lt;span class="spoiler"&gt;</code></td>
                            <td>Hidden hints (hover/tap to reveal)</td>
                        </tr>
                        <tr>
                            <td>Badges</td>
                            <td><code>&lt;span class="badge-cyan"&gt;</code></td>
                            <td>Colored category labels</td>
                        </tr>
                        <tr>
                            <td>Keys</td>
                            <td><code>&lt;kbd&gt;</code></td>
                            <td>Keyboard shortcuts</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- CUSTOMIZATION -->
            <div class="section">
                <h2>Customizing Colors</h2>
                <p>The default color scheme uses <strong>cyan (#00E5FF)</strong> as the primary accent to match Anki Automation's interface. To change this:</p>
                
                <ol class="steps">
                    <li>
                        <strong>Find and Replace</strong>
                        <p>In the CSS, search for <code>#00E5FF</code> (light mode) and <code>#22D3EE</code> (dark mode) and replace with your preferred color.</p>
                    </li>
                    <li>
                        <strong>Alternative Colors</strong>
                        <p>Some popular alternatives:</p>
                        <ul style="margin-top: 8px; margin-left: 20px;">
                            <li><strong>Blue:</strong> #3B82F6 (light) / #60A5FA (dark)</li>
                            <li><strong>Purple:</strong> #8B5CF6 (light) / #A78BFA (dark)</li>
                            <li><strong>Green:</strong> #10B981 (light) / #34D399 (dark)</li>
                            <li><strong>Orange:</strong> #F97316 (light) / #FB923C (dark)</li>
                        </ul>
                    </li>
                </ol>

                <div class="tip-box">
                    <strong>Prompt-Based Control:</strong> You can also tell the AI to avoid certain features when generating cards. For example: "Don't use spoilers or callout boxes" or "Keep formatting minimal".
                </div>
            </div>

            <!-- HTML REFERENCE -->
            <div class="section">
                <h2>HTML Element Reference</h2>
                <p>The AI uses these HTML elements when generating cards. This reference helps you understand what's possible:</p>
                
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="showRefTab('ref-basic')">Basic</button>
                        <button class="tab-btn" onclick="showRefTab('ref-callouts')">Callouts</button>
                        <button class="tab-btn" onclick="showRefTab('ref-spoilers')">Spoilers</button>
                        <button class="tab-btn" onclick="showRefTab('ref-badges')">Badges</button>
                    </div>
                    
                    <div class="tab-content active" id="tab-ref-basic">
                        <div class="code-block" id="ref-basic-code">
<code>&lt;!-- Tables --&gt;
&lt;table&gt;
  &lt;tr&gt;&lt;th&gt;Header 1&lt;/th&gt;&lt;th&gt;Header 2&lt;/th&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Data 1&lt;/td&gt;&lt;td&gt;Data 2&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;

&lt;!-- Code --&gt;
&lt;code&gt;inline code&lt;/code&gt;
&lt;pre&gt;&lt;code&gt;block of code&lt;/code&gt;&lt;/pre&gt;

&lt;!-- Keyboard Keys --&gt;
Press &lt;kbd&gt;Ctrl&lt;/kbd&gt; + &lt;kbd&gt;C&lt;/kbd&gt; to copy.

&lt;!-- Highlighted Text --&gt;
This is &lt;mark&gt;highlighted&lt;/mark&gt; text.

&lt;!-- Blockquote --&gt;
&lt;blockquote&gt;
  "Important quote here."
  &lt;cite&gt;— Author Name&lt;/cite&gt;
&lt;/blockquote&gt;</code></div>
                    </div>
                    
                    <div class="tab-content" id="tab-ref-callouts">
                        <div class="code-block" id="ref-callouts-code">
<code>&lt;!-- Info Box --&gt;
&lt;div class="info"&gt;
  &lt;strong&gt;Note:&lt;/strong&gt; Important information here.
&lt;/div&gt;

&lt;!-- Warning Box --&gt;
&lt;div class="warning"&gt;
  &lt;strong&gt;Warning:&lt;/strong&gt; Be careful about this.
&lt;/div&gt;

&lt;!-- Tip Box --&gt;
&lt;div class="tip"&gt;
  &lt;strong&gt;Tip:&lt;/strong&gt; Helpful hint here.
&lt;/div&gt;

&lt;!-- Error Box --&gt;
&lt;div class="error"&gt;
  &lt;strong&gt;Error:&lt;/strong&gt; Common mistake to avoid.
&lt;/div&gt;</code></div>
                    </div>
                    
                    <div class="tab-content" id="tab-ref-spoilers">
                        <div class="code-block" id="ref-spoilers-code">
<code>&lt;!-- Inline Spoiler (hover on desktop, tap on mobile) --&gt;
The answer is &lt;span class="spoiler" tabindex="0"&gt;hidden text&lt;/span&gt;.

&lt;!-- Block Spoiler (click/tap to expand) --&gt;
&lt;details class="spoiler-block"&gt;
  &lt;summary&gt;Click to reveal hint&lt;/summary&gt;
  &lt;p&gt;The hidden hint content appears here when expanded.&lt;/p&gt;
&lt;/details&gt;</code></div>
                    </div>
                    
                    <div class="tab-content" id="tab-ref-badges">
                        <div class="code-block" id="ref-badges-code">
<code>&lt;!-- Badge Colors --&gt;
&lt;span class="badge badge-cyan"&gt;Primary&lt;/span&gt;
&lt;span class="badge badge-blue"&gt;Blue&lt;/span&gt;
&lt;span class="badge badge-green"&gt;Success&lt;/span&gt;
&lt;span class="badge badge-amber"&gt;Warning&lt;/span&gt;
&lt;span class="badge badge-red"&gt;Error&lt;/span&gt;
&lt;span class="badge badge-purple"&gt;Purple&lt;/span&gt;
&lt;span class="badge badge-gray"&gt;Gray&lt;/span&gt;

&lt;!-- Comparison Table with Checkmarks --&gt;
&lt;table&gt;
  &lt;tr&gt;&lt;th&gt;Feature&lt;/th&gt;&lt;th&gt;Option A&lt;/th&gt;&lt;th&gt;Option B&lt;/th&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Speed&lt;/td&gt;&lt;td class="yes"&gt;✓&lt;/td&gt;&lt;td class="no"&gt;✗&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;</code></div>
                    </div>
                </div>
            </div>

            <!-- TROUBLESHOOTING -->
            <div class="section">
                <h2>Troubleshooting</h2>
                
                <div class="tip-box">
                    <strong>Tables showing as plain text?</strong>
                    <p style="margin-top: 8px; margin-bottom: 0;">Make sure you pasted the CSS in the "Styling" section, not in the Front or Back template.</p>
                </div>
                
                <div class="tip-box">
                    <strong>LaTeX / Math not rendering?</strong>
                    <p style="margin-top: 8px; margin-bottom: 0;">The MathJax script loads from the internet. Make sure you have an internet connection when reviewing cards. On mobile, this may take a moment to load.</p>
                </div>
                
                <div class="tip-box">
                    <strong>Spoilers not revealing on mobile?</strong>
                    <p style="margin-top: 8px; margin-bottom: 0;">Make sure the spoiler element has <code>tabindex="0"</code> for tap support. For guaranteed mobile support, use the <code>&lt;details&gt;</code> block spoiler instead.</p>
                </div>
                
                <div class="tip-box">
                    <strong>Changes not visible?</strong>
                    <p style="margin-top: 8px; margin-bottom: 0;">Press <code>Ctrl+Shift+R</code> (Windows/Linux) or <code>Cmd+Shift+R</code> (Mac) in the card browser to refresh, or restart Anki.</p>
                </div>
                
                <div class="tip-box">
                    <strong>Night mode colors not working?</strong>
                    <p style="margin-top: 8px; margin-bottom: 0;">Make sure Anki's night mode is enabled in preferences. The CSS uses the <code>.nightMode</code> class which Anki adds automatically.</p>
                </div>
                
                <div class="tip-box">
                    <strong>How do reverse cards work?</strong>
                    <p style="margin-top: 8px; margin-bottom: 0;">When the AI marks a card with <code>reverse: true</code>, the system automatically creates two cards: the original and a reversed version (Front↔Back swapped). Reversed cards have a <code>reversed</code> tag so you can filter them in Anki's browser if needed.</p>
                </div>
            </div>

            <!-- LINKS -->
            <div class="section">
                <h2>Additional Resources</h2>
                <p style="margin-bottom: 24px;">
                    <a href="getting-started.html" class="button secondary">Back to Getting Started</a>
                    <a href="index.html" class="button">Open Anki Automation</a>
                </p>
                
                <div class="info-box">
                    <strong>Need more help?</strong>
                    <ul style="margin-top: 12px; margin-bottom: 0; margin-left: 20px;">
                        <li><a href="https://docs.ankiweb.net/templates/styling.html" target="_blank" rel="noopener">Anki Official Styling Documentation</a></li>
                        <li><a href="https://github.com/Mik477/Anki-Automation" target="_blank" rel="noopener">Anki Automation GitHub Repository</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Anki Automation</strong> v2.0.0</p>
            <p style="margin-top: 8px;">Professional card styling for AI-generated content</p>
        </div>
    </div>

    <script>
        function copyToClipboard(elementId, button) {
            const codeBlock = document.getElementById(elementId);
            const code = codeBlock.querySelector('code').innerText;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.innerText;
                button.innerText = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.innerText = originalText;
                    button.classList.remove('copied');
                }, 2000);
            }).catch(err => {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = code;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const originalText = button.innerText;
                button.innerText = 'Copied!';
                button.classList.add('copied');
                
                setTimeout(() => {
                    button.innerText = originalText;
                    button.classList.remove('copied');
                }, 2000);
            });
        }
        
        function showTab(tabName) {
            // Hide all main tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                if (tab.id.startsWith('tab-') && !tab.id.startsWith('tab-ref-')) {
                    tab.classList.remove('active');
                }
            });
            
            // Deactivate all main tab buttons
            const mainTabs = document.querySelector('.tab-container');
            mainTabs.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById('tab-' + tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        function showRefTab(tabName) {
            // Hide all reference tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                if (tab.id.startsWith('tab-ref-')) {
                    tab.classList.remove('active');
                }
            });
            
            // Find the reference tab container and deactivate its buttons
            const refContainer = event.target.closest('.tab-container');
            refContainer.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById('tab-' + tabName).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html>
